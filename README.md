# Grove-LCD_RGB_Backlight_V5.0
## 概要
`SAMPLE.BAS`は、msx0でGrove-LCD RGB Backlight V5.0を使うサンプルプログラムです。  
`SAMPLE.BAS`を流用することで、LCDへの出力、カスタム文字設定、バックライトカラーの変更が出来ます。
## 他プログラムへの流用
1000行目～2110行目、および40000行目以降を、利用したいプログラムへコピーしてください。  
40100行目のサブルーチンを呼び出し、初期化処理を行ってください。  
初期化処理後に、他のサブルーチンを呼び出せるようになります。  
  
IoT対応可否のチェック処理をしています。  
IoTに対応していない環境でプログラムを実行しても、エラー終了とならないようにしています。  
その場合、各サブルーチンの処理はスキップされます。  
※MSX実機で実行し、エラー終了とならないことを確認しました。  

> [!IMPORTANT]
1000行目～2110行目は、各プログラムに合わせて行番号を変更して頂いて問題ありません。  
40000行目以降はサブルーチンなので、行番号を変更する場合は、注意が必要です。  
これは、サブルーチン内から別のサブルーチンを呼び出しているためです。  
サブルーチンの行番号を変更した場合は、他のサブルーチンから呼び出されていないか確認し、都度修正してください。  
  
## サブルーチンリファレンス
### IoT Initialize
- 行番号 40100
- 処理概要 初期化処理
- 処理詳細
  IoTに関する初期化処理を行う。  
  各IoT用サブルーチンを使用する前に呼び出す必要がある。  
  実際の初期化処理は、他のサブルーチンを呼び出して行っている。  
### LCD Send Command
- 行番号 41000
- 処理概要 LCDデバイスへのコマンド送信
- 入力値  
  IV 送信コマンド
- 処理詳細  
  LCDデバイスへ制御コマンドを送信する。  
  主に、文字を表示する位置を設定するために使用する。  
  - 1行目 IV=&H80～&H8F  
  - 2行目 IV=&HC0～&HCF  
### LCD Send Data
- 行番号 42000
- 処理概要 LCDデバイスへのデータ送信
- 入力値  
  IS$ 送信データ
- 処理詳細  
  LCDデバイスへデータを送信する。  
  主に、表示する文字列を送信するために使用する。  
  - IS$=送信するデータのバイト列  
    文字列を表示する場合は、通常の文字列変数を設定する。  
    最大16Bytesまでで、あふれた文字は表示されない。  
    表示位置を指定せずに連続で送信した場合、前回表示した最後の文字の後に続いて表示される。  
### Create Char
- 行番号 49000
- 処理概要 カスタム文字の設定
- 入力値  
  IV 設定するカスタム文字のインデックス値  
  IS$ 設定するカスタム文字の字形データ  
- 処理詳細  
  カスタム文字の字形を設定する。  
  - IV=0～7  
    本サブルーチンでは8文字まで対応。  
    IV=0は、CHR$(0)の文字に該当する。  
  - IS$=字形データ  
    8Bytesの固定長データ。  
    各バイトの上位3ビットは無視される。  
    例）`&B10110001`は、`&B10001`と解釈される。
### Backlight Set for RED
- 行番号 44000
- 処理詳細 バックライトの赤色を設定
- 入力値  
  IV 設定する赤色値
- 処理詳細  
  バックライトの赤色成分の値を設定する。
  - IV=0～255  
    値が大きいほど明るくなる。  
### Backlight Set for GREEN
- 行番号 45000
- 処理詳細 バックライトの緑色を設定
- 入力値  
  IV 設定する緑色値
- 処理詳細  
  バックライトの緑色成分の値を設定する。
  - IV=0～255  
    値が大きいほど明るくなる。  
### Backlight Set for BLUE
- 行番号 46000
- 処理詳細 バックライトの青色を設定
- 入力値  
  IV 設定する青色値
- 処理詳細  
  バックライトの青色成分の値を設定する。
  - IV=0～255  
    値が大きいほど明るくなる。  
## 注意事項
2024/01/27時点において、HRA!さんのBACON(仮)には非対応です。
